---
title: 连接池实现
toc: false
date: 2019-10-28 21:28:59
tags: [php,swoole,rabbitmq]
---

## 简介

## 实现机制
基于swoole channel实现，channel大小默认为10,每次获取连接时判断如果连接池为空，则新建连接，并在结束时放回channel中，放回时注意如果大于channel则销毁该连接，同理如果获取连接时小于5，也需要新建连接。只有 满足`pool >=5` 才从channel中获取该连接。放回时 满足 `pool < 10&`。而且需要检查该连接是否断开
